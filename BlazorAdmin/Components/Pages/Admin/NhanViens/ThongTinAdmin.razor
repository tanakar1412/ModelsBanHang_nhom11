@page "/ThongTinAdmin"
@rendermode InteractiveServer
@using Data.Models
@inject INhanVienService service
@inject NavigationManager NavigationManager

<link rel="stylesheet" href="/css/Profile.css" />
<link rel="stylesheet" href="/css/Form.css" />

@if (admin == null)
{
    <div class="text-center text-danger mt-5 fs-5">❌ Không tìm thấy thông tin Admin.</div>
}
else
{
    <div class="mt-5 px-5 position-relative">

        <a href="/thongke" class="btn btn-secondary position-absolute start-0 top-0 ms-4 mt-3">
            🔙 Quay về
        </a>

        <a href="/taikhoan/edit/@admin.TaiKhoan?.TaikhoanId" class="btn btn-warning fw-bold float-end">
            ✏️ Chỉnh sửa thông tin
        </a>

        <div class="d-flex flex-column align-items-center text-center mb-4">
            <img src="https://cdn.discordapp.com/attachments/1383447837370617867/1387275546592804966/smug.png?ex=685cc088&is=685b6f08&hm=61031208be9cf4552c5fe92c05eca9cab9eeb59fb80e6cc347c2234d130e4542"
                 class="rounded-circle" style="width: 120px; height: 120px;" alt="Avatar" />
            <h2 class="mt-3">@admin.HoTen <span class="badge bg-success"><i class="bi bi-check2"></i></span></h2>
            <div class="text-muted small">@admin.NhanVienId</div>
        </div>

        <div class="card mb-4 shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Thông tin cá nhân</h5>
                <p>📞 Số điện thoại: <strong>@admin.SoDienThoai</strong></p>
                <p>📧 Email: <strong>@admin.Email</strong></p>
                <p>🎂 Ngày sinh: <strong>@admin.NgaySinh.ToString("dd/MM/yyyy")</strong></p>
                <p>🛡️ Chức vụ: <strong>@(admin.ChucVu?.MotaChucVu ?? "Không có chức vụ")</strong></p>
                <p>
                    🔄 Trạng thái:
                    <span class="badge @(admin.TrangThai ? "bg-success" : "bg-danger")">
                        @(admin.TrangThai ? "Đang hoạt động" : "Ngừng hoạt động")
                    </span>
                </p>
                <p>📅 Ngày cập nhật cuối: <strong>@admin.NgayCapNhatCuoiCung.ToString("dd/MM/yyyy")</strong></p>
            </div>
        </div>

        <div class="card shadow-sm">
            <div class="card-body">
                <h5 class="card-title">Thông tin tài khoản</h5>
                <p>👨‍💻 Tên tài khoản: <strong>@(admin.TaiKhoan?.Username ?? "Không có tài khoản")</strong></p>
                
                <p>
                    🕓 Ngày tạo tài khoản:
                    <strong>@(admin.TaiKhoan?.Ngaytaotaikhoan.ToString("dd/MM/yyyy") ?? "Không có")</strong>
                </p>
            </div>
        </div>

    </div>
}

@code {
    private NhanVien? admin;
    private readonly Guid adminId = Guid.Parse("88888888-8888-8888-8888-888888888888");

    protected override async Task OnInitializedAsync()
    {
        admin = await service.GetByIdNhanVienAsync(adminId);
    }
}
